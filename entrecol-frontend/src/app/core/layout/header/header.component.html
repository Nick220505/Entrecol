<mat-toolbar
  color="primary"
  class="nav-toolbar"
  [@toolbarAnimation]="isScrolled() ? 'scrolled' : 'top'"
>
  @if (isHandset()) {
  <button
    mat-icon-button
    (click)="toggleSidenav()"
    [@rotateAnimation]="isMenuOpen() ? 'open' : 'closed'"
  >
    <mat-icon>menu</mat-icon>
  </button>
  }
  <img
    src="assets/logo.png"
    alt="Logo"
    class="nav-logo"
    [@logoAnimation]="'in'"
  />
  <span class="nav-title" [@fadeAnimation]="'in'">ENTRECOL</span>
  <span class="spacer"></span>
  @if (!isHandset()) {
  <nav class="nav-links" [@staggerAnimation]="navItems.length">
    @for (item of navItems; track item) {
    <a
      mat-button
      [routerLink]="item.route"
      routerLinkActive="active"
      class="nav-link"
    >
      <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
      <span>{{ item.label }}</span>
    </a>
    }
  </nav>
  } @if (authService.isAuthenticated()) {
  <button
    mat-button
    [matMenuTriggerFor]="userMenu"
    class="user-menu-button"
    [@fadeAnimation]="'in'"
  >
    <mat-icon class="user-icon">account_circle</mat-icon>
    <mat-icon>arrow_drop_down</mat-icon>
  </button>
  <mat-menu #userMenu="matMenu">
    <button mat-menu-item routerLink="/profile">
      <mat-icon>person</mat-icon>
      <span>Perfil</span>
    </button>
    <button mat-menu-item (click)="logout()">
      <mat-icon>exit_to_app</mat-icon>
      <span>Cerrar Sesi√≥n</span>
    </button>
  </mat-menu>
  }
  <mat-slide-toggle
    [checked]="themeService.isDarkTheme()"
    (change)="toggleTheme()"
    color="accent"
  >
    <mat-icon>{{
      themeService.isDarkTheme() ? "dark_mode" : "light_mode"
    }}</mat-icon>
  </mat-slide-toggle>
</mat-toolbar>

@if (isHandset()) {
<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    #drawer
    class="sidenav"
    fixedInViewport
    [attr.role]="isHandset() ? 'dialog' : 'navigation'"
    [mode]="isHandset() ? 'over' : 'side'"
    [opened]="!isHandset()"
  >
    <mat-toolbar>Menu</mat-toolbar>
    <mat-nav-list>
      @for (item of navItems; track item) {
      <a mat-list-item [routerLink]="item.route" routerLinkActive="active">
        <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
        <span>{{ item.label }}</span>
      </a>
      }
    </mat-nav-list>
  </mat-sidenav>
</mat-sidenav-container>
}
